import{d as K,e as W,r,c as X,j as a,F as h,a as t,b as Y,f as v,t as Z,g as ee}from"./app-a49c5a78.js";import{f as te}from"./formatDate-bc3bac04.js";import{g as u}from"./getPdfName-f68e5630.js";import{P as ae}from"./Paginate-9c603204.js";import{H as se,a as re,N}from"./HeaderMenu-7412cc37.js";import{C as ie}from"./Calendar-8231a825.js";import{C as oe,F as S}from"./Folder-cb6eeb6a.js";import{A as le}from"./ArrowRightSmall-6bd9f2cd.js";import{B as C}from"./ButtonLink-12d94386.js";import{O as me}from"./OpenModalButton-ea72b798.js";import{R as ne}from"./ReviewFormModal-5754c077.js";import{C as de}from"./CustomModal-ea005d7c.js";import{R as ce}from"./CourseCard-1b65f799.js";import{s as pe}from"./searchSchema-f5bd175a.js";import{D as fe}from"./DownloadButton-c31fc163.js";import{U as he}from"./Update-13ee9edc.js";import{D as _}from"./Download-01d408d5.js";import"./skeleton-8d7a5a4d.js";import"./HeaderSearchForm-4f8242ed.js";import"./HeaderSelect-9cdb3651.js";import"./ClearSearch-0207e6fd.js";import"./motion-40339a45.js";import"./formatFloatValue-d2472650.js";import"./index-43bb34cf.js";import"./ErrorMessage-7be6b0a8.js";import"./InputGroup-f38d1b0d.js";import"./Label-6d906fb8.js";import"./Textarea-e6a46244.js";import"./SaveInfoButton-10614d3b.js";import"./CancelActionButton-67acae2c.js";import"./GoToCourse-7fd142c5.js";import"./formatDuration-1786162a.js";import"./calculatePrice-d81d1627.js";import"./Plus-7f1644d6.js";import"./CourseCardInfo-d3234b5e.js";import"./courseHasDiscount-b6208886.js";import"./ChartSales-2a65ba98.js";import"./Clock-c1d73b24.js";import"./Project-b10068f0.js";import"./Trash-0012037f.js";const ue=[{id:1,name:"Todos os meus cursos",value:"all-my-courses"},{id:2,name:"Comprados recentemente",value:"recently-purchased"},{id:3,name:"Iniciados",value:"initiates"},{id:4,name:"Não iniciados",value:"uninitiated"},{id:5,name:"Concluídos",value:"completed"}],at=({auth:$,userHaveCourses:F,courseData:o,popularCourses:A,totalCourses:M,error:m,search:l,selectedOption:k})=>{const{axiosInstance:B}=K(),{showLoader:P,hideLoader:R}=W(),[n,j]=r.useState(A),[x,L]=r.useState(l??""),[g,d]=r.useState(!1),[w,O]=r.useState("all-my-courses"),[V,c]=r.useState(!1),[I,U]=r.useState(null);function z(){P(),B.get(`popular-courses/${n.length}/3?all_courses=${!1}`).then(e=>{j([...n,...e.data])}).catch(e=>{console.error(e.response.data.errors)}).finally(()=>R())}const{register:E,setValue:H,handleSubmit:T,formState:{errors:q}}=X({resolver:Z(pe)}),D=e=>{L(e.search),d(!0)},Q=()=>{let e="";w&&(e+=`option=${w}&`),x&&(e+=`search=${x}&`),ee.visit(`/student/mycourses?${e}`,{preserveScroll:!0})};r.useEffect(()=>{g&&(Q(),d(!1))},[g]);const G=e=>{const s=e.target.value;O(s),d(!0)};r.useEffect(()=>{l&&H("search",l)},[]);let p="";m&&(l?p=`Nenhum resultado encontrado para "${l}"`:p="Nenhum resultado encontrado");const[i,b]=r.useState(null),[f,J]=r.useState(!1),y=e=>{if(f&&e.id!==(i==null?void 0:i.id)){b(e);return}b(e),J(s=>!s)};return a(h,{children:[t(Y,{title:"Meus cursos"}),t(se,{}),a("div",{className:"max-w-[47.375rem] w-full mx-auto px-4 sm:px-8",children:[F&&((o==null?void 0:o.data.length)>0||m)?a(h,{children:[t(re,{handleSubmit:T,onSubmit:D,title:"Meus cursos",options:ue,option:k,showSelect:!0,search:l,handleOptionChange:G,register:E,errors:q,url:"/student/mycourses"}),m?t(N,{title:p}):a(h,{children:[t("section",{className:`${o.prev_page_url||o.next_page_url?"mb-10":"mb-4"}`,children:o.data.map(e=>a("div",{className:"pb-6 pt-4 border-t border-secondary-20 flex flex-col sm:flex-row gap-4",children:[t(v,{href:`/student/course/${e.slug}`,className:"sm:max-w-[8.25rem] md:max-w-[12.75rem] w-full",children:a("picture",{children:[t("source",{srcSet:e.thumbnail_webp,type:"image/webp"}),t("source",{srcSet:e.thumbnail,type:"image/png"}),t("img",{src:e.thumbnail,alt:e.title,className:"w-full"})]})}),a("div",{className:"flex flex-col gap-4 flex-1",children:[a("div",{className:"flex flex-col gap-2",children:[t(v,{href:`/student/course/${e.slug}`,className:"text-sm text-black font-medium",children:e.title}),t("p",{className:"text-secondary-80 text-xs font-medium",children:e.user.full_name}),a("div",{className:"flex items-center gap-1 text-xs font-medium text-primary-default",children:[t(ie,{}),a("span",{children:["Última atualização -"," ",te(e.lastUpdate)]})]})]}),t(oe,{watchedPercentage:e.watchedPercentage,completedLessons:e.completed_lessons_count,totalLessons:e.lessons_count,showLink:!1,isCompleted:e.is_completed}),a("div",{"data-has-certificate":!!e.has_certificate,className:"sm:max-md:-ml-2 sm:max-md:data-[has-certificate=true]:-ml-6 md:max-lg:data-[has-certificate=true]:-ml-1.5 flex justify-between sm:justify-normal gap-2",children:[t(me,{setOpenModal:c,text:"Avalie o curso",course:e,setActualData:U,className:"sm:max-md:!px-2.5"}),e.has_certificate?t(fe,{path:e.certificate_path,file_name:`Certificado - ${u(e.title)}`,text:"Baixar certificado"}):"",e.is_completed&&!e.has_certificate?t(C,{className:"bg-primary-default text-white self-end hover:bg-primary-light",text:"Verificar status",url:`/certificates/${e.id}/user/${$.user.id}/status`,preserveScroll:!0,icon:t(he,{})}):"",!e.has_certificate&&!e.is_completed?t(C,{className:"bg-primary-default hover:bg-primary-light text-white",text:"Ir para o curso",icon:t(le,{color:"white"}),url:`/student/course/${e.slug}`}):"",e.resources&&e.resources.length>0&&a("div",{className:"hidden sm:block relative",children:[a("button",{className:"h-8 px-6 py-1 text-sm font-medium hover:bg-primary-light rounded-lg flex justify-center items-center gap-2 border border-primary-default min-w-fit",onClick:()=>{y(e)},children:["Recursos",t(S,{width:"24",height:"24"})]}),f&&(i==null?void 0:i.id)===e.id&&t("div",{className:"absolute z-50 flex flex-col items-start bg-white w-64 overflow-x-hidden right-0 mt-1 py-1 border border-secondary-80 rounded-md shadow-dropdown",children:e.resources.map(s=>a("a",{href:s.file_path,download:u(s.name),className:"py-2 px-4 w-full text-left font-medium text-sm text-primary-dark hover:bg-primary-lightest flex items-center gap-2",children:[t("span",{className:"min-w-fit",children:t(_,{color:"#010A16",width:"18",height:"18"})}),s.name]},s.id))})]})]}),e.resources&&e.resources.length>0&&a("div",{className:"sm:hidden relative",children:[a("button",{className:"h-10 px-6 py-1 text-sm font-medium hover:bg-primary-light rounded-lg flex justify-center items-center gap-2 border border-primary-default w-full",onClick:()=>{y(e)},children:["Recursos",t(S,{width:"24",height:"24"})]}),f&&(i==null?void 0:i.id)===e.id&&t("div",{className:"absolute z-50 flex flex-col items-start bg-white w-full overflow-x-hidden right-0 mt-1 border border-secondary-80 rounded-md shadow-dropdown",children:e.resources.map(s=>a("a",{href:s.file_path,download:u(s.name),className:"h-10 py-2 px-4 w-full text-left font-medium text-sm text-primary-dark flex items-center gap-2 border-b last:border-none border-secondary-20",children:[t("span",{className:"min-w-fit",children:t(_,{color:"#010A16",width:"18",height:"18"})}),s.name]},s.id))})]})]})]},e.id))}),t(ae,{data:o,className:"mb-10"})]})]}):t(N,{title:"Você ainda não tem cursos",url:"/",buttonText:"Conhecer cursos",showButton:!0}),t(ce,{courses:n,totalCourses:M,showMoreItems:z}),V&&t(de,{title:"Que nota você da para esse curso?",handleCancelAction:()=>c(!1),children:t(ne,{handleCancelAction:()=>c(!1),course:I})})]})]})};export{at as default};
